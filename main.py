import telebot
from telebot import types
from schedule import scheduleCore
from lessons import lessonHandler
import os
import json
from dotenv import load_dotenv
load_dotenv()

with open('config.json', 'r', encoding='utf-8') as f:
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–æ–±—ã—á–Ω–æ —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å –∏–ª–∏ —Å–ø–∏—Å–æ–∫)
    data = json.load(f)

print(data["admins"])

SCHEDULE = scheduleCore(data["bot_data"]["sheet"]).maplike()
DATABASE = lessonHandler(data["bot_data"]["schedule"]["subjects"],data["bot_data"]["schedule"]["weeks"],SCHEDULE)
bot = telebot.TeleBot(os.getenv("TOKEN"))

def start_keyboard():
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    keyboard.add("–†–æ–∑–∫–ª–∞–¥ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ", "–†–æ–∑–∫–ª–∞–¥ –Ω–∞ –∑–∞–≤—Ç—Ä–∞", "–†–æ–∑–∫–ª–∞–¥ –Ω–∞ –¥–µ–Ω—å", "–Ü–Ω—à–µ")
    return keyboard

# /start
@bot.message_handler(commands=['start'])
def start(message):

    bot.send_message(message.chat.id, "üëã –í—ñ—Ç–∞—é! –¶–µ –±–æ—Ç —Ä–æ–∑–∫–ª–∞–¥—É –∑–∞–Ω—è—Ç—å", reply_markup=start_keyboard())

# –†–æ–∑–∫–ª–∞–¥ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
@bot.message_handler(func=lambda message: message.text == "–†–æ–∑–∫–ª–∞–¥ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ")
def scheduleToday(message):
    bot.send_message(message.chat.id, "–†–æ–∑–∫–ª–∞–¥ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ:")

# –†–æ–∑–∫–ª–∞–¥ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
@bot.message_handler(func=lambda message: message.text == "–†–æ–∑–∫–ª–∞–¥ –Ω–∞ –∑–∞–≤—Ç—Ä–∞")
def scheduleToday(message):
    bot.send_message(message.chat.id, "–†–æ–∑–∫–ª–∞–¥ –Ω–∞ –∑–∞–≤—Ç—Ä–∞:")

# –†–æ–∑–∫–ª–∞–¥ –Ω–∞ –¥–µ–Ω—å
@bot.message_handler(func=lambda message: message.text == "–†–æ–∑–∫–ª–∞–¥ –Ω–∞ –¥–µ–Ω—å")
def scheduleDay(message):
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    keyboard.add("–ü–ù", "–í–¢", "–°–†", "–ß–¢", "–ü–¢", "–ù–∞–∑–∞–¥")
    bot.send_message(message.chat.id, "–í–∏–±–µ—Ä—ñ—Ç—å –¥–µ–Ω—å", reply_markup=keyboard)

@bot.message_handler(func=lambda message: message.text == "–ü–ù")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–ü–ù:")

@bot.message_handler(func=lambda message: message.text == "–í–¢")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–í–¢:")

@bot.message_handler(func=lambda message: message.text == "–°–†")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–°–†:")
    
@bot.message_handler(func=lambda message: message.text == "–ß–¢")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–ß–¢:")

@bot.message_handler(func=lambda message: message.text == "–ü–¢")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–ü–¢:")


# –Ü–Ω—à–µ
@bot.message_handler(func=lambda message: message.text == "–Ü–Ω—à–µ")
def scheduleToday(message):
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    keyboard.add("–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–Ω—è", "–í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –≤—ñ–¥ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω—å", "–æ–±—Ä–∞—Ç–∏ Google –∞–∫–∞—É–Ω—Ç", "–ù–∞–∑–∞–¥")
    bot.send_message(message.chat.id, "–í–∏–±–µ—Ä—ñ—Ç—å —â–æ —Ö–æ—á–µ—Ç–µ", reply_markup=keyboard)

@bot.message_handler(func=lambda message: message.text == "–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–Ω—è")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–í–∏ –ø—ñ–¥–ø–∏—Å–∞–ª–∏—Å—è –Ω–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–Ω—è", reply_markup=start_keyboard())

@bot.message_handler(func=lambda message: message.text == "–í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –≤—ñ–¥ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω—å")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–í–∏ –≤—ñ–¥–ø–∏—Å–∞–ª–∏—Å—è –≤—ñ–¥ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω—å", reply_markup=start_keyboard())

@bot.message_handler(func=lambda message: message.text == "–æ–±—Ä–∞—Ç–∏ Google –∞–∫–∞—É–Ω—Ç")
def scheduleDay(message):
    bot.send_message(message.chat.id, "–ù–∞–ø–∏—à—ñ—Ç—å —Ü–∏—Ñ—Ä—É –∞–∫–∞—É–Ω—Ç—É(test)", reply_markup=start_keyboard()) 
    # –ó–¥–µ–ª–∞—Ç—å –≤–∏–±–æ—Ä –∞–∫–∞—É–Ω—Ç–∞ 


# –Ω–∞–∑–∞–¥
@bot.message_handler(func=lambda message: message.text == "–ù–∞–∑–∞–¥")
def goback(message):
    bot.send_message(message.chat.id, "–í–∏–±–µ—Ä—ñ—Ç—å —â–æ —Ö–æ—á–µ—Ç–µ", reply_markup=start_keyboard())


# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
bot.polling()
